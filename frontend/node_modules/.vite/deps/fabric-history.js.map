{
  "version": 3,
  "sources": ["../../fabric-history/src/index.min.js"],
  "sourcesContent": ["fabric.Canvas.prototype.initialize=function(i){return function(...t){return i.call(this,...t),this._historyInit(),this}}(fabric.Canvas.prototype.initialize),fabric.Canvas.prototype.dispose=function(i){return function(...t){return i.call(this,...t),this._historyDispose(),this}}(fabric.Canvas.prototype.dispose),fabric.Canvas.prototype._historyNext=function(){return JSON.stringify(this.toDatalessJSON(this.extraProps))},fabric.Canvas.prototype._historyEvents=function(){return{\"object:added\":t=>this._historySaveAction(t),\"object:removed\":t=>this._historySaveAction(t),\"object:modified\":t=>this._historySaveAction(t),\"object:skewing\":t=>this._historySaveAction(t)}},fabric.Canvas.prototype._historyInit=function(){this.historyUndo=[],this.historyRedo=[],this.extraProps=[\"selectable\",\"editable\"],this.historyNextState=this._historyNext(),this.on(this._historyEvents())},fabric.Canvas.prototype._historyDispose=function(){this.off(this._historyEvents())},fabric.Canvas.prototype._historySaveAction=function(t){this.historyProcessing||t&&(!t.target||t.target.excludeFromExport)||(t=this._historyNext(),this.historyUndo.push(t),this.historyNextState=this._historyNext(),this.fire(\"history:append\",{json:t}))},fabric.Canvas.prototype.undo=function(t){this.historyProcessing=!0;var i=this.historyUndo.pop();i?(this.historyRedo.push(this._historyNext()),this.historyNextState=i,this._loadHistory(i,\"history:undo\",t)):this.historyProcessing=!1},fabric.Canvas.prototype.redo=function(t){this.historyProcessing=!0;var i=this.historyRedo.pop();i?(this.historyUndo.push(this._historyNext()),this.historyNextState=i,this._loadHistory(i,\"history:redo\",t)):this.historyProcessing=!1},fabric.Canvas.prototype._loadHistory=function(t,i,o){var s=this;this.loadFromJSON(t,function(){s.renderAll(),s.fire(i),s.historyProcessing=!1,o&&\"function\"==typeof o&&o()})},fabric.Canvas.prototype.clearHistory=function(){this.historyUndo=[],this.historyRedo=[],this.fire(\"history:clear\")},fabric.Canvas.prototype.onHistory=function(){this.historyProcessing=!1,this._historySaveAction()},fabric.Canvas.prototype.canUndo=function(){return 0<this.historyUndo.length},fabric.Canvas.prototype.canRedo=function(){return 0<this.historyRedo.length},fabric.Canvas.prototype.offHistory=function(){this.historyProcessing=!0};"],
  "mappings": ";AAAA,OAAO,OAAO,UAAU,aAAW,yBAAS,GAAE;AAAC,SAAO,YAAY,GAAE;AAAC,WAAO,EAAE,KAAK,MAAK,GAAG,CAAC,GAAE,KAAK,aAAa,GAAE;AAAA,EAAI;AAAC,EAAE,OAAO,OAAO,UAAU,UAAU,GAAE,OAAO,OAAO,UAAU,UAAQ,yBAAS,GAAE;AAAC,SAAO,YAAY,GAAE;AAAC,WAAO,EAAE,KAAK,MAAK,GAAG,CAAC,GAAE,KAAK,gBAAgB,GAAE;AAAA,EAAI;AAAC,EAAE,OAAO,OAAO,UAAU,OAAO,GAAE,OAAO,OAAO,UAAU,eAAa,WAAU;AAAC,SAAO,KAAK,UAAU,KAAK,eAAe,KAAK,UAAU,CAAC;AAAC,GAAE,OAAO,OAAO,UAAU,iBAAe,WAAU;AAAC,SAAM,EAAC,gBAAe,OAAG,KAAK,mBAAmB,CAAC,GAAE,kBAAiB,OAAG,KAAK,mBAAmB,CAAC,GAAE,mBAAkB,OAAG,KAAK,mBAAmB,CAAC,GAAE,kBAAiB,OAAG,KAAK,mBAAmB,CAAC,EAAC;AAAC,GAAE,OAAO,OAAO,UAAU,eAAa,WAAU;AAAC,OAAK,cAAY,CAAC,GAAE,KAAK,cAAY,CAAC,GAAE,KAAK,aAAW,CAAC,cAAa,UAAU,GAAE,KAAK,mBAAiB,KAAK,aAAa,GAAE,KAAK,GAAG,KAAK,eAAe,CAAC;AAAC,GAAE,OAAO,OAAO,UAAU,kBAAgB,WAAU;AAAC,OAAK,IAAI,KAAK,eAAe,CAAC;AAAC,GAAE,OAAO,OAAO,UAAU,qBAAmB,SAAS,GAAE;AAAC,OAAK,qBAAmB,MAAI,CAAC,EAAE,UAAQ,EAAE,OAAO,uBAAqB,IAAE,KAAK,aAAa,GAAE,KAAK,YAAY,KAAK,CAAC,GAAE,KAAK,mBAAiB,KAAK,aAAa,GAAE,KAAK,KAAK,kBAAiB,EAAC,MAAK,EAAC,CAAC;AAAE,GAAE,OAAO,OAAO,UAAU,OAAK,SAAS,GAAE;AAAC,OAAK,oBAAkB;AAAG,MAAI,IAAE,KAAK,YAAY,IAAI;AAAE,OAAG,KAAK,YAAY,KAAK,KAAK,aAAa,CAAC,GAAE,KAAK,mBAAiB,GAAE,KAAK,aAAa,GAAE,gBAAe,CAAC,KAAG,KAAK,oBAAkB;AAAE,GAAE,OAAO,OAAO,UAAU,OAAK,SAAS,GAAE;AAAC,OAAK,oBAAkB;AAAG,MAAI,IAAE,KAAK,YAAY,IAAI;AAAE,OAAG,KAAK,YAAY,KAAK,KAAK,aAAa,CAAC,GAAE,KAAK,mBAAiB,GAAE,KAAK,aAAa,GAAE,gBAAe,CAAC,KAAG,KAAK,oBAAkB;AAAE,GAAE,OAAO,OAAO,UAAU,eAAa,SAAS,GAAE,GAAE,GAAE;AAAC,MAAI,IAAE;AAAK,OAAK,aAAa,GAAE,WAAU;AAAC,MAAE,UAAU,GAAE,EAAE,KAAK,CAAC,GAAE,EAAE,oBAAkB,OAAG,KAAG,cAAY,OAAO,KAAG,EAAE;AAAA,EAAC,CAAC;AAAC,GAAE,OAAO,OAAO,UAAU,eAAa,WAAU;AAAC,OAAK,cAAY,CAAC,GAAE,KAAK,cAAY,CAAC,GAAE,KAAK,KAAK,eAAe;AAAC,GAAE,OAAO,OAAO,UAAU,YAAU,WAAU;AAAC,OAAK,oBAAkB,OAAG,KAAK,mBAAmB;AAAC,GAAE,OAAO,OAAO,UAAU,UAAQ,WAAU;AAAC,SAAO,IAAE,KAAK,YAAY;AAAM,GAAE,OAAO,OAAO,UAAU,UAAQ,WAAU;AAAC,SAAO,IAAE,KAAK,YAAY;AAAM,GAAE,OAAO,OAAO,UAAU,aAAW,WAAU;AAAC,OAAK,oBAAkB;AAAE;",
  "names": []
}
